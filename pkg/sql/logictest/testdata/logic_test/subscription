statement ok
CREATE TABLE json_subscript_test (
  id INT PRIMARY KEY,
  j JSONB,
  extract_field TEXT,
  extract_int_field INT
);
INSERT INTO json_subscript_test (id, j, extract_field, extract_int_field) VALUES
  (1, '{"other_field": 2}', 'other_field', 1),
  (2, '{"field": {"field": 2}}', 'field', 0),
  (3, '[1, 2, 3]', 'nothing_to_fetch', 1)

statement ok
UPDATE json_subscript_test SET j[extract_int_field] = '3'::JSONB WHERE id = 3

query T
SELECT j FROM json_subscript_test WHERE id = 3
----
[1, 3, 3]