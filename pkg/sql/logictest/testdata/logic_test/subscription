statement ok
CREATE TYPE t AS (a INT, b INT)

statement ok
CREATE TABLE json_subscript_test (
  id INT PRIMARY KEY,
  j JSONB,
  p t,
  extract_field TEXT,
  extract_int_field INT
);
INSERT INTO json_subscript_test (id, j, p.a, extract_field, extract_int_field) VALUES
  (1, '{"other_field": 2}', 3, 'other_field', 1),
  (2, '{"field": {"field": 2}}', 2, 'field', 0),
  (3, '[1, 2, 3]', 1, 'nothing_to_fetch', 1)

query T
SELECT p FROM json_subscript_test WHERE id = 1
----
[1, 3, 3]